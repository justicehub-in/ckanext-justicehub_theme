{% ckan_extends %}

{% block search_input %}
{% set stats=h.get_site_statistics() %}
<div class="col col-md-2 pull-left input-group">
    <div class="form-control input-lg square-border dataset-count-box">
        <span>{{_('DATA')}}</span>
        <span class="dataset-count">{{ _('[') }}{{ stats.dataset_count }}{{ _(']') }}</span>
    </div>
</div>

<div class="col col-md-7 input-group pull-left">
  <input aria-label="{% block header_site_search_label %}{{ placeholder }}{% endblock %}" id="field-giant-search" type="text" class="form-control input-lg square-border" name="q" value="{{ query }}" autocomplete="off" placeholder="{{ placeholder }}">
  {% block search_input_button %}
  <span class="input-group-btn">
    <button class="btn btn-default btn-lg square-border" type="submit" value="search">
      <i class="fa fa-search fa-flip-horizontal"></i>
    </button>
  </span>
  {% endblock %}
</div>
{% endblock %}

{% block search_sortby %}
{% if sorting %}
  <div class="col col-md-3 input-group">
    <span class="input-group-addon square-border bg-clear">{{ _('SORT BY') }}</span>
    <select id="field-order-by" name="sort" class="form-control input-lg square-border sort-box">
      {% for label, value in sorting %}
        {% if label and value %}
          <option value="{{ value }}"{% if sorting_selected == value %} selected="selected"{% endif %}>{{ label }}</option>
        {% endif %}
      {% endfor %}
    </select>
    {% block search_sortby_button %}
    <button class="btn btn-default js-hide" type="submit">{{ _('Go') }}</button>
    {% endblock %}
  </div>
{% endif %}
{% endblock %}

{% block search_title %}
{% endblock %}

{% block search_facets %}
{% endblock %}

{% if show_empty and count == 0 and not error %}
  {% trans %}
    <p class="extra">Please try another search.</p>
  {% endtrans %}
{% endif %}

{% if error %}
  {% trans %}
    <p id="search-error"><strong>There was an error while searching.</strong> Please try again.</p>
  {% endtrans %}
{% endif %}
